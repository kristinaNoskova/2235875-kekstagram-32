(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const p of o)if(p.type==="childList")for(const v of p.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&a(v)}).observe(document,{childList:!0,subtree:!0});function i(o){const p={};return o.integrity&&(p.integrity=o.integrity),o.referrerPolicy&&(p.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?p.credentials="include":o.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(o){if(o.ep)return;o.ep=!0;const p=i(o);fetch(o.href,p)}})();const Pr=5e3,Tr=document.querySelector("#data-error").content,At=Tr.querySelector(".data-error"),kr=()=>{document.body.append(At),setTimeout(()=>{At.remove()},Pr)},Ve=t=>t.key==="Escape",We=(t,e)=>{let i;return(...a)=>{clearTimeout(i),i=setTimeout(()=>t.apply(globalThis,a),e)}},Ht={data:null},Dr=t=>Ht[t],Vr=(t,e)=>{Ht[t]=e},Or=5,le=document.querySelector(".big-picture"),Lt=le.querySelector(".big-picture__img img"),qr=le.querySelector(".likes-count"),Mr=le.querySelector(".social__caption"),It=le.querySelector(".social__comments"),Rr=le.querySelector(".social__comment-count"),Nr=le.querySelector(".social__comment-total-count"),Hr=Rr.querySelector(".social__comment-shown-count"),Pt=le.querySelector(".comments-loader");let Je=[],fe=0;const Ut=document.createDocumentFragment(),Ir=t=>{const e=t.dataset.id;return Dr("data").find(o=>o.id===Number(e))},Ur=t=>{t.forEach(({avatar:e,name:i,message:a})=>{const o=document.createElement("img");o.classList.add("social__picture"),o.src=e,o.alt=i,o.width=35,o.height=35;const p=document.createElement("p");p.classList.add("social__text"),p.textContent=a;const v=document.createElement("li");v.classList.add("social__comment"),v.append(o),v.append(p),Ut.append(v)})},rt=()=>{const t=Je.slice(fe,fe+Or);t.length>0&&(Ur(t),It.append(Ut),Pt.classList.remove("hidden"),fe+=t.length,Hr.textContent=fe),fe>=Je.length&&Pt.classList.add("hidden")},Fr=()=>{rt()},$r=t=>{fe=0,It.innerHTML="";const e=Ir(t);Lt.src=e.url,Lt.alt=e.description,qr.textContent=e.likes,Nr.textContent=e.comments.length,Mr.textContent=e.description,Je=e.comments,Fr()},nt=document.querySelector(".big-picture"),zr=document.querySelector(".pictures"),jr=document.querySelector(".big-picture__cancel"),Ft=nt.querySelector(".comments-loader"),$t=t=>{Ve(t)&&(t.preventDefault(),zt())},Br=t=>{const e=t.target.closest(".picture");e&&(nt.classList.remove("hidden"),document.body.classList.add("modal-open"),$r(e),document.addEventListener("keydown",$t),Ft.addEventListener("click",rt))};function zt(){nt.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",$t),Ft.removeEventListener("click",rt)}zr.addEventListener("click",Br);jr.addEventListener("click",zt);const Tt=25,Gr=25,Kr=100,Xr=100,Oe=document.querySelector(".img-upload__form"),Yr=Oe.querySelector(".scale__control--smaller"),Wr=Oe.querySelector(".scale__control--bigger"),jt=Oe.querySelector(".scale__control--value"),Zr=Oe.querySelector(".img-upload__preview img"),kt=t=>{const e=t/Xr;Zr.style.transform=`scale(${e})`,jt.setAttribute("value",`${t}%`)},Jr=()=>{let t=jt.value.slice(0,-1);Yr.addEventListener("click",()=>{t>Gr&&(t-=Tt,kt(t))}),Wr.addEventListener("click",()=>{t<Kr&&(t+=Tt,kt(t))})},Qr=0,en=10,Dt=document.querySelector(".pictures"),tn=document.querySelector("#picture").content,rn=tn.querySelector(".picture"),be=document.querySelector(".img-filters"),nn=be.querySelectorAll(".img-filters__button"),sn=be.querySelector("#filter-default"),on=be.querySelector("#filter-random"),an=be.querySelector("#filter-discussed"),_e=t=>{const e=document.createDocumentFragment();return t.forEach(({url:i,description:a,likes:o,comments:p,id:v})=>{const L=rn.cloneNode(!0),P=L.querySelector(".picture__img");P.src=i,P.alt=a,L.querySelector(".picture__comments").textContent=p.length,L.querySelector(".picture__likes").textContent=o,L.dataset.id=v,e.append(L)}),Array.from(Dt.querySelectorAll(".picture")).forEach(i=>i.remove()),Dt.append(e),t},ln=(t,e)=>e.comments.length-t.comments.length,cn=t=>t.slice().sort(ln),un=t=>t.slice().sort((e,i)=>e.id-i.id),fn=t=>t.sort(()=>Math.random()-.5).slice(Qr,en),dn=()=>{be.classList.remove("img-filters--inactive")},st=t=>{nn.forEach(e=>e.classList.remove("img-filters__button--active")),t.target.classList.add("img-filters__button--active")},mn=t=>{sn.addEventListener("click",e=>{st(e),t()})},pn=t=>{an.addEventListener("click",e=>{st(e),t()})},hn=t=>{on.addEventListener("click",e=>{st(e),t()})};var ne;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(ne||(ne={}));var G;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(G||(G={}));function vn(t){return Te(t)&&typeof t.from=="function"}function Te(t){return typeof t=="object"&&typeof t.to=="function"}function Vt(t){t.parentElement.removeChild(t)}function Qe(t){return t!=null}function Ot(t){t.preventDefault()}function gn(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function Sn(t,e){return Math.round(t/e)*e}function En(t,e){var i=t.getBoundingClientRect(),a=t.ownerDocument,o=a.documentElement,p=Bt(a);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(p.x=0),e?i.top+p.y-o.clientTop:i.left+p.x-o.clientLeft}function W(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function qt(t,e,i){i>0&&(j(t,e),setTimeout(function(){Pe(t,e)},i))}function Mt(t){return Math.max(Math.min(t,100),0)}function qe(t){return Array.isArray(t)?t:[t]}function bn(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function j(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function Pe(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function yn(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function Bt(t){var e=window.pageXOffset!==void 0,i=(t.compatMode||"")==="CSS1Compat",a=e?window.pageXOffset:i?t.documentElement.scrollLeft:t.body.scrollLeft,o=e?window.pageYOffset:i?t.documentElement.scrollTop:t.body.scrollTop;return{x:a,y:o}}function xn(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Cn(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function wn(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function it(t,e){return 100/(e-t)}function et(t,e,i){return e*100/(t[i+1]-t[i])}function _n(t,e){return et(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function An(t,e){return e*(t[1]-t[0])/100+t[0]}function Ee(t,e){for(var i=1;t>=e[i];)i+=1;return i}function Ln(t,e,i){if(i>=t.slice(-1)[0])return 100;var a=Ee(i,t),o=t[a-1],p=t[a],v=e[a-1],L=e[a];return v+_n([o,p],i)/it(v,L)}function Pn(t,e,i){if(i>=100)return t.slice(-1)[0];var a=Ee(i,e),o=t[a-1],p=t[a],v=e[a-1],L=e[a];return An([o,p],(i-v)*it(v,L))}function Tn(t,e,i,a){if(a===100)return a;var o=Ee(a,t),p=t[o-1],v=t[o];return i?a-p>(v-p)/2?v:p:e[o-1]?t[o-1]+Sn(a-t[o-1],e[o-1]):a}var Gt=function(){function t(e,i,a){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[a||!1],this.xNumSteps=[!1],this.snap=i;var o,p=[];for(Object.keys(e).forEach(function(v){p.push([qe(e[v]),v])}),p.sort(function(v,L){return v[0][0]-L[0][0]}),o=0;o<p.length;o++)this.handleEntryPoint(p[o][1],p[o][0]);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)this.handleStepPoint(o,this.xNumSteps[o])}return t.prototype.getDistance=function(e){for(var i=[],a=0;a<this.xNumSteps.length-1;a++)i[a]=et(this.xVal,e,a);return i},t.prototype.getAbsoluteDistance=function(e,i,a){var o=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[o+1];)o++;else e===this.xPct[this.xPct.length-1]&&(o=this.xPct.length-2);!a&&e===this.xPct[o+1]&&o++,i===null&&(i=[]);var p,v=1,L=i[o],P=0,C=0,N=0,I=0;for(a?p=(e-this.xPct[o])/(this.xPct[o+1]-this.xPct[o]):p=(this.xPct[o+1]-e)/(this.xPct[o+1]-this.xPct[o]);L>0;)P=this.xPct[o+1+I]-this.xPct[o+I],i[o+I]*v+100-p*100>100?(C=P*p,v=(L-100*p)/i[o+I],p=1):(C=i[o+I]*P/100*v,v=0),a?(N=N-C,this.xPct.length+I>=1&&I--):(N=N+C,this.xPct.length-I>=1&&I++),L=i[o+I]*v;return e+N},t.prototype.toStepping=function(e){return e=Ln(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return Pn(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=Tn(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,i,a){var o=Ee(e,this.xPct);return(e===100||i&&e===this.xPct[o-1])&&(o=Math.max(o-1,1)),(this.xVal[o]-this.xVal[o-1])/a},t.prototype.getNearbySteps=function(e){var i=Ee(e,this.xPct);return{stepBefore:{startValue:this.xVal[i-2],step:this.xNumSteps[i-2],highestStep:this.xHighestCompleteStep[i-2]},thisStep:{startValue:this.xVal[i-1],step:this.xNumSteps[i-1],highestStep:this.xHighestCompleteStep[i-1]},stepAfter:{startValue:this.xVal[i],step:this.xNumSteps[i],highestStep:this.xHighestCompleteStep[i]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(bn);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,i){var a;if(e==="min"?a=0:e==="max"?a=100:a=parseFloat(e),!W(a)||!W(i[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(a),this.xVal.push(i[0]);var o=Number(i[1]);a?this.xSteps.push(isNaN(o)?!1:o):isNaN(o)||(this.xSteps[0]=o),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,i){if(i){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=et([this.xVal[e],this.xVal[e+1]],i,0)/it(this.xPct[e],this.xPct[e+1]);var a=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],o=Math.ceil(Number(a.toFixed(3))-1),p=this.xVal[e]+this.xNumSteps[e]*o;this.xHighestCompleteStep[e]=p}},t}(),Rt={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},Kt={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},re={tooltips:".__tooltips",aria:".__aria"};function kn(t,e){if(!W(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function Dn(t,e){if(!W(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function Vn(t,e){if(!W(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function On(t,e){if(!W(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function qn(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new Gt(e,t.snap||!1,t.singleStep)}function Mn(t,e){if(e=qe(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function Rn(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function Nn(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function Hn(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function Xt(t,e){var i=[!1],a;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(a=1;a<t.handles;a++)i.push(e);i.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=e}t.connect=i}function In(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Yt(t,e){if(!W(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function Un(t,e){if(!W(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Fn(t,e){var i;if(!W(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||W(e[0])||W(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],i=0;i<t.spectrum.xNumSteps.length-1;i++)if(t.padding[0][i]<0||t.padding[1][i]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var a=e[0]+e[1],o=t.spectrum.xVal[0],p=t.spectrum.xVal[t.spectrum.xVal.length-1];if(a/(p-o)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function $n(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function zn(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,a=e.indexOf("drag")>=0,o=e.indexOf("fixed")>=0,p=e.indexOf("snap")>=0,v=e.indexOf("hover")>=0,L=e.indexOf("unconstrained")>=0,P=e.indexOf("invert-connects")>=0,C=e.indexOf("drag-all")>=0,N=e.indexOf("smooth-steps")>=0;if(o){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Yt(t,t.start[1]-t.start[0])}if(P&&t.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(L&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:i||p,drag:a,dragAll:C,smoothSteps:N,fixed:o,snap:p,hover:v,unconstrained:L,invertConnects:P}}function jn(t,e){if(e!==!1)if(e===!0||Te(e)){t.tooltips=[];for(var i=0;i<t.handles;i++)t.tooltips.push(e)}else{if(e=qe(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(a){if(typeof a!="boolean"&&!Te(a))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function Bn(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function Gn(t,e){if(!Te(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function Kn(t,e){if(!vn(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Xn(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Yn(t,e){t.documentElement=e}function Wn(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Zn(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(i){t.cssClasses[i]=t.cssPrefix+e[i]})):t.cssClasses=e}function Wt(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:Rt,format:Rt},i={step:{r:!1,t:kn},keyboardPageMultiplier:{r:!1,t:Dn},keyboardMultiplier:{r:!1,t:Vn},keyboardDefaultStep:{r:!1,t:On},start:{r:!0,t:Mn},connect:{r:!0,t:Xt},direction:{r:!0,t:$n},snap:{r:!1,t:Rn},animate:{r:!1,t:Nn},animationDuration:{r:!1,t:Hn},range:{r:!0,t:qn},orientation:{r:!1,t:In},margin:{r:!1,t:Yt},limit:{r:!1,t:Un},padding:{r:!1,t:Fn},behaviour:{r:!0,t:zn},ariaFormat:{r:!1,t:Gn},format:{r:!1,t:Kn},tooltips:{r:!1,t:jn},keyboardSupport:{r:!0,t:Xn},documentElement:{r:!1,t:Yn},cssPrefix:{r:!0,t:Wn},cssClasses:{r:!0,t:Zn},handleAttributes:{r:!1,t:Bn}},a={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Kt,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(i).forEach(function(P){if(!Qe(t[P])&&a[P]===void 0){if(i[P].r)throw new Error("noUiSlider: '"+P+"' is required.");return}i[P].t(e,Qe(t[P])?t[P]:a[P])}),e.pips=t.pips;var o=document.createElement("div"),p=o.style.msTransform!==void 0,v=o.style.transform!==void 0;e.transformRule=v?"transform":p?"msTransform":"webkitTransform";var L=[["left","top"],["right","bottom"]];return e.style=L[e.dir][e.ort],e}function Jn(t,e,i){var a=xn(),o=wn(),p=o&&Cn(),v=t,L,P,C,N,I,Z,b=e.spectrum,K=[],w=[],H=[],x=0,h={},A=!1,m=t.ownerDocument,ee=e.documentElement||m.documentElement,te=m.body,Ne=m.dir==="rtl"||e.ort===1?0:100;function X(r,n){var s=m.createElement("div");return n&&j(s,n),r.appendChild(s),s}function ye(r,n){var s=X(r,e.cssClasses.origin),l=X(s,e.cssClasses.handle);if(X(l,e.cssClasses.touchArea),l.setAttribute("data-handle",String(n)),e.keyboardSupport&&(l.setAttribute("tabindex","0"),l.addEventListener("keydown",function(u){return Sr(u,n)})),e.handleAttributes!==void 0){var c=e.handleAttributes[n];Object.keys(c).forEach(function(u){l.setAttribute(u,c[u])})}return l.setAttribute("role","slider"),l.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),n===0?j(l,e.cssClasses.handleLower):n===e.handles-1&&j(l,e.cssClasses.handleUpper),s.handle=l,s}function he(r,n){return n?X(r,e.cssClasses.connect):!1}function He(r,n){P=X(n,e.cssClasses.connects),C=[],N=[],N.push(he(P,r[0]));for(var s=0;s<e.handles;s++)C.push(ye(n,s)),H[s]=s,N.push(he(P,r[s+1]))}function f(r){j(r,e.cssClasses.target),e.dir===0?j(r,e.cssClasses.ltr):j(r,e.cssClasses.rtl),e.ort===0?j(r,e.cssClasses.horizontal):j(r,e.cssClasses.vertical);var n=getComputedStyle(r).direction;return n==="rtl"?j(r,e.cssClasses.textDirectionRtl):j(r,e.cssClasses.textDirectionLtr),X(r,e.cssClasses.base)}function E(r,n){return!e.tooltips||!e.tooltips[n]?!1:X(r.firstChild,e.cssClasses.tooltip)}function _(){return v.hasAttribute("disabled")}function S(r){var n=C[r];return n.hasAttribute("disabled")}function y(r){r!=null?(C[r].setAttribute("disabled",""),C[r].handle.removeAttribute("tabindex")):(v.setAttribute("disabled",""),C.forEach(function(n){n.handle.removeAttribute("tabindex")}))}function V(r){r!=null?(C[r].removeAttribute("disabled"),C[r].handle.setAttribute("tabindex","0")):(v.removeAttribute("disabled"),C.forEach(function(n){n.removeAttribute("disabled"),n.handle.setAttribute("tabindex","0")}))}function B(){Z&&(ve("update"+re.tooltips),Z.forEach(function(r){r&&Vt(r)}),Z=null)}function F(){B(),Z=C.map(E),ze("update"+re.tooltips,function(r,n,s){if(!(!Z||!e.tooltips)&&Z[n]!==!1){var l=r[n];e.tooltips[n]!==!0&&(l=e.tooltips[n].to(s[n])),Z[n].innerHTML=l}})}function J(){ve("update"+re.aria),ze("update"+re.aria,function(r,n,s,l,c){H.forEach(function(u){var g=C[u],d=xe(w,u,0,!0,!0,!0),k=xe(w,u,100,!0,!0,!0),D=c[u],O=String(e.ariaFormat.to(s[u]));d=b.fromStepping(d).toFixed(1),k=b.fromStepping(k).toFixed(1),D=b.fromStepping(D).toFixed(1),g.children[0].setAttribute("aria-valuemin",d),g.children[0].setAttribute("aria-valuemax",k),g.children[0].setAttribute("aria-valuenow",D),g.children[0].setAttribute("aria-valuetext",O)})})}function ce(r){if(r.mode===ne.Range||r.mode===ne.Steps)return b.xVal;if(r.mode===ne.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=r.values-1,s=100/n,l=[];n--;)l[n]=n*s;return l.push(100),ue(l,r.stepped)}return r.mode===ne.Positions?ue(r.values,r.stepped):r.mode===ne.Values?r.stepped?r.values.map(function(c){return b.fromStepping(b.getStep(b.toStepping(c)))}):r.values:[]}function ue(r,n){return r.map(function(s){return b.fromStepping(n?b.getStep(s):s)})}function ur(r){function n(D,O){return Number((D+O).toFixed(7))}var s=ce(r),l={},c=b.xVal[0],u=b.xVal[b.xVal.length-1],g=!1,d=!1,k=0;return s=gn(s.slice().sort(function(D,O){return D-O})),s[0]!==c&&(s.unshift(c),g=!0),s[s.length-1]!==u&&(s.push(u),d=!0),s.forEach(function(D,O){var q,T,R,z=D,U=s[O+1],$,Ge,Ke,Xe,Ct,Ye,wt,_t=r.mode===ne.Steps;for(_t&&(q=b.xNumSteps[O]),q||(q=U-z),U===void 0&&(U=z),q=Math.max(q,1e-7),T=z;T<=U;T=n(T,q)){for($=b.toStepping(T),Ge=$-k,Ct=Ge/(r.density||1),Ye=Math.round(Ct),wt=Ge/Ye,R=1;R<=Ye;R+=1)Ke=k+R*wt,l[Ke.toFixed(5)]=[b.fromStepping(Ke),0];Xe=s.indexOf(T)>-1?G.LargeValue:_t?G.SmallValue:G.NoValue,!O&&g&&T!==U&&(Xe=0),T===U&&d||(l[$.toFixed(5)]=[T,Xe]),k=$}}),l}function fr(r,n,s){var l,c,u=m.createElement("div"),g=(l={},l[G.None]="",l[G.NoValue]=e.cssClasses.valueNormal,l[G.LargeValue]=e.cssClasses.valueLarge,l[G.SmallValue]=e.cssClasses.valueSub,l),d=(c={},c[G.None]="",c[G.NoValue]=e.cssClasses.markerNormal,c[G.LargeValue]=e.cssClasses.markerLarge,c[G.SmallValue]=e.cssClasses.markerSub,c),k=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],D=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];j(u,e.cssClasses.pips),j(u,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function O(T,R){var z=R===e.cssClasses.value,U=z?k:D,$=z?g:d;return R+" "+U[e.ort]+" "+$[T]}function q(T,R,z){if(z=n?n(R,z):z,z!==G.None){var U=X(u,!1);U.className=O(z,e.cssClasses.marker),U.style[e.style]=T+"%",z>G.NoValue&&(U=X(u,!1),U.className=O(z,e.cssClasses.value),U.setAttribute("data-value",String(R)),U.style[e.style]=T+"%",U.innerHTML=String(s.to(R)))}}return Object.keys(r).forEach(function(T){q(T,r[T][0],r[T][1])}),u}function Ie(){I&&(Vt(I),I=null)}function Ue(r){Ie();var n=ur(r),s=r.filter,l=r.format||{to:function(c){return String(Math.round(c))}};return I=v.appendChild(fr(n,s,l)),I}function pt(){var r=L.getBoundingClientRect(),n="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||L[n]:r.height||L[n]}function ie(r,n,s,l){var c=function(g){var d=dr(g,l.pageOffset,l.target||n);if(!d||_()&&!l.doNotReject||yn(v,e.cssClasses.tap)&&!l.doNotReject||r===a.start&&d.buttons!==void 0&&d.buttons>1||l.hover&&d.buttons)return!1;p||d.preventDefault(),d.calcPoint=d.points[e.ort],s(d,l)},u=[];return r.split(" ").forEach(function(g){n.addEventListener(g,c,p?{passive:!0}:!1),u.push([g,c])}),u}function dr(r,n,s){var l=r.type.indexOf("touch")===0,c=r.type.indexOf("mouse")===0,u=r.type.indexOf("pointer")===0,g=0,d=0;if(r.type.indexOf("MSPointer")===0&&(u=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(l){var k=function(q){var T=q.target;return T===s||s.contains(T)||r.composed&&r.composedPath().shift()===s};if(r.type==="touchstart"){var D=Array.prototype.filter.call(r.touches,k);if(D.length>1)return!1;g=D[0].pageX,d=D[0].pageY}else{var O=Array.prototype.find.call(r.changedTouches,k);if(!O)return!1;g=O.pageX,d=O.pageY}}return n=n||Bt(m),(c||u)&&(g=r.clientX+n.x,d=r.clientY+n.y),r.pageOffset=n,r.points=[g,d],r.cursor=c||u,r}function ht(r){var n=r-En(L,e.ort),s=n*100/pt();return s=Mt(s),e.dir?100-s:s}function mr(r){var n=100,s=!1;return C.forEach(function(l,c){if(!S(c)){var u=w[c],g=Math.abs(u-r),d=g===100&&n===100,k=g<n,D=g<=n&&r>u;(k||D||d)&&(s=c,n=g)}}),s}function pr(r,n){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Fe(r,n)}function hr(r,n){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&n.buttonsProperty!==0)return Fe(r,n);var s=(e.dir?-1:1)*(r.calcPoint-n.startCalcPoint),l=s*100/n.baseSize;gt(s>0,l,n.locations,n.handleNumbers,n.connect)}function Fe(r,n){n.handle&&(Pe(n.handle,e.cssClasses.active),x-=1),n.listeners.forEach(function(s){ee.removeEventListener(s[0],s[1])}),x===0&&(Pe(v,e.cssClasses.drag),Be(),r.cursor&&(te.style.cursor="",te.removeEventListener("selectstart",Ot))),e.events.smoothSteps&&(n.handleNumbers.forEach(function(s){oe(s,w[s],!0,!0,!1,!1)}),n.handleNumbers.forEach(function(s){M("update",s)})),n.handleNumbers.forEach(function(s){M("change",s),M("set",s),M("end",s)})}function $e(r,n){if(!n.handleNumbers.some(S)){var s;if(n.handleNumbers.length===1){var l=C[n.handleNumbers[0]];s=l.children[0],x+=1,j(s,e.cssClasses.active)}r.stopPropagation();var c=[],u=ie(a.move,ee,hr,{target:r.target,handle:s,connect:n.connect,listeners:c,startCalcPoint:r.calcPoint,baseSize:pt(),pageOffset:r.pageOffset,handleNumbers:n.handleNumbers,buttonsProperty:r.buttons,locations:w.slice()}),g=ie(a.end,ee,Fe,{target:r.target,handle:s,listeners:c,doNotReject:!0,handleNumbers:n.handleNumbers}),d=ie("mouseout",ee,pr,{target:r.target,handle:s,listeners:c,doNotReject:!0,handleNumbers:n.handleNumbers});c.push.apply(c,u.concat(g,d)),r.cursor&&(te.style.cursor=getComputedStyle(r.target).cursor,C.length>1&&j(v,e.cssClasses.drag),te.addEventListener("selectstart",Ot,!1)),n.handleNumbers.forEach(function(k){M("start",k)})}}function vr(r){r.stopPropagation();var n=ht(r.calcPoint),s=mr(n);s!==!1&&(e.events.snap||qt(v,e.cssClasses.tap,e.animationDuration),oe(s,n,!0,!0),Be(),M("slide",s,!0),M("update",s,!0),e.events.snap?$e(r,{handleNumbers:[s]}):(M("change",s,!0),M("set",s,!0)))}function gr(r){var n=ht(r.calcPoint),s=b.getStep(n),l=b.fromStepping(s);Object.keys(h).forEach(function(c){c.split(".")[0]==="hover"&&h[c].forEach(function(u){u.call(we,l)})})}function Sr(r,n){if(_()||S(n))return!1;var s=["Left","Right"],l=["Down","Up"],c=["PageDown","PageUp"],u=["Home","End"];e.dir&&!e.ort?s.reverse():e.ort&&!e.dir&&(l.reverse(),c.reverse());var g=r.key.replace("Arrow",""),d=g===c[0],k=g===c[1],D=g===l[0]||g===s[0]||d,O=g===l[1]||g===s[1]||k,q=g===u[0],T=g===u[1];if(!D&&!O&&!q&&!T)return!0;r.preventDefault();var R;if(O||D){var z=D?0:1,U=yt(n),$=U[z];if($===null)return!1;$===!1&&($=b.getDefaultStep(w[n],D,e.keyboardDefaultStep)),k||d?$*=e.keyboardPageMultiplier:$*=e.keyboardMultiplier,$=Math.max($,1e-7),$=(D?-1:1)*$,R=K[n]+$}else T?R=e.spectrum.xVal[e.spectrum.xVal.length-1]:R=e.spectrum.xVal[0];return oe(n,b.toStepping(R),!0,!0),M("slide",n),M("update",n),M("change",n),M("set",n),!1}function vt(r){r.fixed||C.forEach(function(n,s){ie(a.start,n.children[0],$e,{handleNumbers:[s]})}),r.tap&&ie(a.start,L,vr,{}),r.hover&&ie(a.move,L,gr,{hover:!0}),r.drag&&N.forEach(function(n,s){if(!(n===!1||s===0||s===N.length-1)){var l=C[s-1],c=C[s],u=[n],g=[l,c],d=[s-1,s];j(n,e.cssClasses.draggable),r.fixed&&(u.push(l.children[0]),u.push(c.children[0])),r.dragAll&&(g=C,d=H),u.forEach(function(k){ie(a.start,k,$e,{handles:g,handleNumbers:d,connect:n})})}})}function ze(r,n){h[r]=h[r]||[],h[r].push(n),r.split(".")[0]==="update"&&C.forEach(function(s,l){M("update",l)})}function Er(r){return r===re.aria||r===re.tooltips}function ve(r){var n=r&&r.split(".")[0],s=n?r.substring(n.length):r;Object.keys(h).forEach(function(l){var c=l.split(".")[0],u=l.substring(c.length);(!n||n===c)&&(!s||s===u)&&(!Er(u)||s===u)&&delete h[l]})}function M(r,n,s){Object.keys(h).forEach(function(l){var c=l.split(".")[0];r===c&&h[l].forEach(function(u){u.call(we,K.map(e.format.to),n,K.slice(),s||!1,w.slice(),we)})})}function xe(r,n,s,l,c,u,g){var d;return C.length>1&&!e.events.unconstrained&&(l&&n>0&&(d=b.getAbsoluteDistance(r[n-1],e.margin,!1),s=Math.max(s,d)),c&&n<C.length-1&&(d=b.getAbsoluteDistance(r[n+1],e.margin,!0),s=Math.min(s,d))),C.length>1&&e.limit&&(l&&n>0&&(d=b.getAbsoluteDistance(r[n-1],e.limit,!1),s=Math.min(s,d)),c&&n<C.length-1&&(d=b.getAbsoluteDistance(r[n+1],e.limit,!0),s=Math.max(s,d))),e.padding&&(n===0&&(d=b.getAbsoluteDistance(0,e.padding[0],!1),s=Math.max(s,d)),n===C.length-1&&(d=b.getAbsoluteDistance(100,e.padding[1],!0),s=Math.min(s,d))),g||(s=b.getStep(s)),s=Mt(s),s===r[n]&&!u?!1:s}function je(r,n){var s=e.ort;return(s?n:r)+", "+(s?r:n)}function gt(r,n,s,l,c){var u=s.slice(),g=l[0],d=e.events.smoothSteps,k=[!r,r],D=[r,!r];l=l.slice(),r&&l.reverse(),l.length>1?l.forEach(function(q,T){var R=xe(u,q,u[q]+n,k[T],D[T],!1,d);R===!1?n=0:(n=R-u[q],u[q]=R)}):k=D=[!0];var O=!1;l.forEach(function(q,T){O=oe(q,s[q]+n,k[T],D[T],!1,d)||O}),O&&(l.forEach(function(q){M("update",q),M("slide",q)}),c!=null&&M("drag",g))}function St(r,n){return e.dir?100-r-n:r}function br(r,n){w[r]=n,K[r]=b.fromStepping(n);var s=St(n,0)-Ne,l="translate("+je(s+"%","0")+")";if(C[r].style[e.transformRule]=l,e.events.invertConnects&&w.length>1){var c=w.every(function(u,g,d){return g===0||u>=d[g-1]});if(A!==!c){Ar();return}}ge(r),ge(r+1),A&&(ge(r-1),ge(r+2))}function Be(){H.forEach(function(r){var n=w[r]>50?-1:1,s=3+(C.length+n*r);C[r].style.zIndex=String(s)})}function oe(r,n,s,l,c,u){return c||(n=xe(w,r,n,s,l,!1,u)),n===!1?!1:(br(r,n),!0)}function ge(r){if(N[r]){var n=w.slice();A&&n.sort(function(d,k){return d-k});var s=0,l=100;r!==0&&(s=n[r-1]),r!==N.length-1&&(l=n[r]);var c=l-s,u="translate("+je(St(s,c)+"%","0")+")",g="scale("+je(c/100,"1")+")";N[r].style[e.transformRule]=u+" "+g}}function Et(r,n){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=b.toStepping(r)),r===!1||isNaN(r))?w[n]:r}function Ce(r,n,s){var l=qe(r),c=w[0]===void 0;n=n===void 0?!0:n,e.animate&&!c&&qt(v,e.cssClasses.tap,e.animationDuration),H.forEach(function(d){oe(d,Et(l[d],d),!0,!1,s)});var u=H.length===1?0:1;if(c&&b.hasNoSize()&&(s=!0,w[0]=0,H.length>1)){var g=100/(H.length-1);H.forEach(function(d){w[d]=d*g})}for(;u<H.length;++u)H.forEach(function(d){oe(d,w[d],!0,!0,s)});Be(),H.forEach(function(d){M("update",d),l[d]!==null&&n&&M("set",d)})}function yr(r){Ce(e.start,r)}function xr(r,n,s,l){if(r=Number(r),!(r>=0&&r<H.length))throw new Error("noUiSlider: invalid handle number, got: "+r);oe(r,Et(n,r),!0,!0,l),M("update",r),s&&M("set",r)}function bt(r){if(r===void 0&&(r=!1),r)return K.length===1?K[0]:K.slice(0);var n=K.map(e.format.to);return n.length===1?n[0]:n}function Cr(){for(ve(re.aria),ve(re.tooltips),Object.keys(e.cssClasses).forEach(function(r){Pe(v,e.cssClasses[r])});v.firstChild;)v.removeChild(v.firstChild);delete v.noUiSlider}function yt(r){var n=w[r],s=b.getNearbySteps(n),l=K[r],c=s.thisStep.step,u=null;if(e.snap)return[l-s.stepBefore.startValue||null,s.stepAfter.startValue-l||null];c!==!1&&l+c>s.stepAfter.startValue&&(c=s.stepAfter.startValue-l),l>s.thisStep.startValue?u=s.thisStep.step:s.stepBefore.step===!1?u=!1:u=l-s.stepBefore.highestStep,n===100?c=null:n===0&&(u=null);var g=b.countStepDecimals();return c!==null&&c!==!1&&(c=Number(c.toFixed(g))),u!==null&&u!==!1&&(u=Number(u.toFixed(g))),[u,c]}function wr(){return H.map(yt)}function _r(r,n){var s=bt(),l=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];l.forEach(function(u){r[u]!==void 0&&(i[u]=r[u])});var c=Wt(i);l.forEach(function(u){r[u]!==void 0&&(e[u]=c[u])}),b=c.spectrum,e.margin=c.margin,e.limit=c.limit,e.padding=c.padding,e.pips?Ue(e.pips):Ie(),e.tooltips?F():B(),w=[],Ce(Qe(r.start)?r.start:s,n),r.connect&&xt()}function xt(){for(;P.firstChild;)P.removeChild(P.firstChild);for(var r=0;r<=e.handles;r++)N[r]=he(P,e.connect[r]),ge(r);vt({drag:e.events.drag,fixed:!0})}function Ar(){A=!A,Xt(e,e.connect.map(function(r){return!r})),xt()}function Lr(){L=f(v),He(e.connect,L),vt(e.events),Ce(e.start),e.pips&&Ue(e.pips),e.tooltips&&F(),J()}Lr();var we={destroy:Cr,steps:wr,on:ze,off:ve,get:bt,set:Ce,setHandle:xr,reset:yr,disable:y,enable:V,__moveHandles:function(r,n,s){gt(r,n,w,s)},options:i,updateOptions:_r,target:v,removePips:Ie,removeTooltips:B,getPositions:function(){return w.slice()},getTooltips:function(){return Z},getOrigins:function(){return C},pips:Ue};return we}function Qn(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var i=Wt(e),a=Jn(t,i,e);return t.noUiSlider=a,a}const es={__spectrum:Gt,cssClasses:Kt,create:Qn};const Se={NONE:"none",CHROME:"chrome",SEPIA:"sepia",MARVIN:"marvin",PHOBOS:"phobos",HEAT:"heat"},Q={NONE:"none",GRAYSCALE:"grayscale",SEPIA:"sepia",INVERT:"invert",BLUR:"blur",BRIGHTNESS:"brightness"},se={phobos:{range:{min:0,max:3},start:3,step:.1},heat:{range:{min:1,max:3},start:3,step:.1},marvin:{range:{min:0,max:100},start:100,step:1},chrome:{range:{min:0,max:1},step:.1,start:1},sepia:{range:{min:0,max:1},step:.1,start:1},none:{range:{min:0,max:1},step:.1,start:1}},Me=document.querySelector(".img-upload__form"),tt=Me.querySelector(".img-upload__preview img"),ts=Me.querySelector(".effects__list"),de=Me.querySelector(".img-upload__effect-level"),Ae=de.querySelector(".effect-level__value"),ke=de.querySelector(".effect-level__slider"),rs=Me.querySelector(".scale__control--value");let Y;de.classList.add("hidden");const ns=()=>{tt.style.filter="none",de.classList.add("hidden"),tt.style.transform="scale(100%)",rs.setAttribute("value","100%")};es.create(ke,{range:{min:se.none.range.min,max:se.none.range.max},step:se.none.step,start:se.none.start,connect:"lower",format:{to:t=>Number.isInteger(t)?t.toFixed(0):t.toFixed(1),from:t=>parseFloat(t)}});const Le=t=>{tt.style.filter=t},ss=t=>{switch(!0){case t.value===Se.CHROME:Y=Q.GRAYSCALE;break;case t.value===Se.SEPIA:Y=Q.SEPIA;break;case t.value===Se.MARVIN:Y=Q.INVERT;break;case t.value===Se.PHOBOS:Y=Q.BLUR;break;case t.value===Se.HEAT:Y=Q.BRIGHTNESS;break;default:Y=Q.NONE,de.classList.add("hidden")}};ke.noUiSlider.on("update",()=>{Ae.setAttribute("value",ke.noUiSlider.get()),Y===Q.INVERT?Le(`${Y}(${Ae.getAttribute("value")}%)`):Y===Q.BLUR?Le(`${Y}(${Ae.getAttribute("value")}px)`):Y===Q.NONE?Le(Q.NONE):Le(`${Y}(${Ae.getAttribute("value")})`)});const is=t=>{const e=t.value;ke.noUiSlider.updateOptions({range:{min:se[e].range.min,max:se[e].range.max},start:se[e].start,step:se[e].step})},os=t=>{const e=t.target.closest(".effects__radio");e&&(de.classList.remove("hidden"),ss(e),is(e))};ts.addEventListener("click",os);const as="https://32.javascript.htmlacademy.pro/kekstagram",Zt={GET_DATA:"/data",SEND_DATA:"/"},Jt={GET:"GET",POST:"POST"},Qt=async(t,e=Jt.GET,i=null)=>{let a;try{if(a=await fetch(`${as}${t}`,{method:e,body:i}),!a.ok)throw new Error(`${a.status}: ${a.statusText}`)}catch(o){throw new Error(o.message)}return await a.json()},ls=()=>Qt(Zt.GET_DATA),cs=t=>Qt(Zt.SEND_DATA,Jt.POST,t),er=document.querySelector("#success").content,ot=er.querySelector(".success"),us=er.querySelector(".success__inner"),fs=ot.querySelector(".success__button"),tr=t=>{Ve(t)&&(t.preventDefault(),at())},rr=t=>{us.contains(t.target)||at()},ds=()=>{document.body.append(ot),document.addEventListener("keydown",tr),document.addEventListener("click",rr)};function at(){ot.remove(),document.removeEventListener("keydown",tr),document.removeEventListener("click",rr)}fs.addEventListener("click",at);const ms=document.querySelector("#error").content,Re=ms.querySelector(".error"),ps=Re.querySelector(".error__inner"),hs=Re.querySelector(".error__button"),nr=t=>{Ve(t)&&(t.preventDefault(),t.stopPropagation(),lt())},sr=t=>{ps.contains(t.target)||lt()},vs=()=>{document.body.append(Re),document.body.addEventListener("keydown",nr),document.addEventListener("click",sr)};function lt(){Re.remove(),document.body.removeEventListener("keydown",nr),document.removeEventListener("click",sr)}hs.addEventListener("click",lt);var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ss(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ir={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(gs,function(){var i={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function a(x,h){for(;(x=x.parentElement)&&!x.classList.contains(h););return x}function o(x){var h=arguments;return this.replace(/\${([^{}]*)}/g,function(A,m){return h[m]})}function p(x){return x.pristine.self.form.querySelectorAll('input[name="'+x.getAttribute("name")+'"]:checked').length}function v(x,h){for(var A in h)A in x||(x[A]=h[A]);return x}var L={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},P="pristine-error",C="input:not([type^=hidden]):not([type^=submit]), select, textarea",N=["required","min","max","minlength","maxlength","pattern"],I=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Z=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,b="en",K={},w=function(h,A){A.name=h,A.priority===void 0&&(A.priority=1),K[h]=A};w("text",{fn:function(h){return!0},priority:0}),w("required",{fn:function(h){return this.type==="radio"||this.type==="checkbox"?p(this):h!==void 0&&h.trim()!==""},priority:99,halt:!0}),w("email",{fn:function(h){return!h||I.test(h)}}),w("number",{fn:function(h){return!h||!isNaN(parseFloat(h))},priority:2}),w("integer",{fn:function(h){return!h||/^\d+$/.test(h)}}),w("minlength",{fn:function(h,A){return!h||h.length>=parseInt(A)}}),w("maxlength",{fn:function(h,A){return!h||h.length<=parseInt(A)}}),w("min",{fn:function(h,A){return!h||(this.type==="checkbox"?p(this)>=parseInt(A):parseFloat(h)>=parseFloat(A))}}),w("max",{fn:function(h,A){return!h||(this.type==="checkbox"?p(this)<=parseInt(A):parseFloat(h)<=parseFloat(A))}}),w("pattern",{fn:function(h,A){var m=A.match(new RegExp("^/(.*?)/([gimy]*)$"));return!h||new RegExp(m[1],m[2]).test(h)}}),w("equals",{fn:function(h,A){var m=document.querySelector(A);return m&&(!h&&!m.value||m.value===h)}});function H(x,h,A){var m=this;ee(x,h,A);function ee(f,E,_){f.setAttribute("novalidate","true"),m.form=f,m.config=v(E||{},L),m.live=_!==!1,m.fields=Array.from(f.querySelectorAll(C)).map((function(S){var y=[],V={},B={};return[].forEach.call(S.attributes,function(F){if(/^data-pristine-/.test(F.name)){var J=F.name.substr(14),ce=J.match(Z);if(ce!==null){var ue=ce[1]===void 0?"en":ce[1];B.hasOwnProperty(ue)||(B[ue]={}),B[ue][J.slice(0,J.length-ce[0].length)]=F.value;return}J==="type"&&(J=F.value),te(y,V,J,F.value)}else~N.indexOf(F.name)?te(y,V,F.name,F.value):F.name==="type"&&te(y,V,F.value)}),y.sort(function(F,J){return J.priority-F.priority}),m.live&&S.addEventListener(~["radio","checkbox"].indexOf(S.getAttribute("type"))?"change":"input",(function(F){m.validate(F.target)}).bind(m)),S.pristine={input:S,validators:y,params:V,messages:B,self:m}}).bind(m))}function te(f,E,_,S){var y=K[_];if(y&&(f.push(y),S)){var V=_==="pattern"?[S]:S.split(",");V.unshift(null),E[_]=V}}m.validate=function(f,E){E=f&&E===!0||f===!0;var _=m.fields;f!==!0&&f!==!1&&(f instanceof HTMLElement?_=[f.pristine]:(f instanceof NodeList||f instanceof(window.$||Array)||f instanceof Array)&&(_=Array.from(f).map(function(B){return B.pristine})));for(var S=!0,y=0;_[y];y++){var V=_[y];Ne(V)?!E&&He(V):(S=!1,!E&&ye(V))}return S},m.getErrors=function(f){if(!f){for(var E=[],_=0;_<m.fields.length;_++){var S=m.fields[_];S.errors.length&&E.push({input:S.input,errors:S.errors})}return E}return f.tagName&&f.tagName.toLowerCase()==="select"?f.pristine.errors:f.length?f[0].pristine.errors:f.pristine.errors};function Ne(f){for(var E=[],_=!0,S=0;f.validators[S];S++){var y=f.validators[S],V=f.params[y.name]?f.params[y.name]:[];if(V[0]=f.input.value,!y.fn.apply(f.input,V)&&(_=!1,typeof y.msg=="function"?E.push(y.msg(f.input.value,V)):typeof y.msg=="string"?E.push(o.apply(y.msg,V)):y.msg===Object(y.msg)&&y.msg[b]?E.push(o.apply(y.msg[b],V)):f.messages[b]&&f.messages[b][y.name]?E.push(o.apply(f.messages[b][y.name],V)):i[b]&&i[b][y.name]?E.push(o.apply(i[b][y.name],V)):E.push(o.apply(i[b].default,V)),y.halt===!0))break}return f.errors=E,_}m.addValidator=function(f,E,_,S,y){f instanceof HTMLElement?(f.pristine.validators.push({fn:E,msg:_,priority:S,halt:y}),f.pristine.validators.sort(function(V,B){return B.priority-V.priority})):console.warn("The parameter elem must be a dom element")};function X(f){if(f.errorElements)return f.errorElements;var E=a(f.input,m.config.classTo),_=null,S=null;return m.config.classTo===m.config.errorTextParent?_=E:_=E.querySelector("."+m.config.errorTextParent),_&&(S=_.querySelector("."+P),S||(S=document.createElement(m.config.errorTextTag),S.className=P+" "+m.config.errorTextClass,_.appendChild(S),S.pristineDisplay=S.style.display)),f.errorElements=[E,S]}function ye(f){var E=X(f),_=E[0],S=E[1],y=f.input,V=y.id||Math.floor(new Date().valueOf()*Math.random()),B="error-"+V;_&&(_.classList.remove(m.config.successClass),_.classList.add(m.config.errorClass),y.setAttribute("aria-describedby",B),y.setAttribute("aria-invalid","true")),S&&(S.setAttribute("id",B),S.setAttribute("role","alert"),S.innerHTML=f.errors.join("<br/>"),S.style.display=S.pristineDisplay||"")}m.addError=function(f,E){f=f.length?f[0]:f,f.pristine.errors.push(E),ye(f.pristine)};function he(f){var E=X(f),_=E[0],S=E[1],y=f.input;return _&&(_.classList.remove(m.config.errorClass),_.classList.remove(m.config.successClass),y.removeAttribute("aria-describedby"),y.removeAttribute("aria-invalid")),S&&(S.removeAttribute("id"),S.removeAttribute("role"),S.innerHTML="",S.style.display="none"),E}function He(f){var E=he(f)[0];E&&E.classList.add(m.config.successClass)}return m.reset=function(){for(var f=0;m.fields[f];f++)m.fields[f].errorElements=null;Array.from(m.form.querySelectorAll("."+P)).map(function(E){E.parentNode.removeChild(E)}),Array.from(m.form.querySelectorAll("."+m.config.classTo)).map(function(E){E.classList.remove(m.config.successClass),E.classList.remove(m.config.errorClass)})},m.destroy=function(){m.reset(),m.fields.forEach(function(f){delete f.input.pristine}),m.fields=[]},m.setGlobalConfig=function(f){L=f},m}return H.addValidator=function(x,h,A,m,ee){w(x,{fn:h,msg:A,priority:m,halt:ee})},H.addMessages=function(x,h){var A=i.hasOwnProperty(x)?i[x]:i[x]={};Object.keys(h).forEach(function(m,ee){A[m]=h[m]})},H.setLocale=function(x){b=x},H})})(ir);var Es=ir.exports;const bs=Ss(Es),ys=/^#[a-zя-яёйц0-9]{1,19}$/i,xs=5,Cs=140,ct={MAX_LENGTH:"Максимум 5 хештегов",INVALID:"Хештег должен начинаться с # и включать буквы и цифры",REPEAT:"Такой хештег уже существует"},or={IDLE:"Опубликовать",SENDING:"Опубликовываю..."},ut={FIRST:1,SECOND:2,THIRD:3},ws=document.querySelector(".pictures"),ae=ws.querySelector(".img-upload__form"),_s=ae.querySelector(".text__description"),ft=ae.querySelector(".text__hashtags"),De=ae.querySelector(".img-upload__submit"),As=()=>{De.disabled=!0,De.textContent=or.SENDING},Ls=()=>{De.disabled=!1,De.textContent=or.IDLE},me=new bs(ae,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper",errorTextTag:"div",errorTextClass:"img-upload__field-wrapper--error"}),Ps=t=>t.length<=Cs,dt=t=>t.trim().split(" ").filter(e=>!!e.length),Ts=t=>{const e=dt(t);return t.length===0?!0:e.every(i=>ys.test(i))},ks=t=>dt(t).length<=xs,Ds=t=>{const a=dt(t).slice().sort().map(o=>o.toLowerCase());return t.length===0?!0:a[0]!==a[1]};me.addValidator(_s,Ps,"Максимум 140 символов");me.addValidator(ft,Ts,ct.INVALID,ut.FIRST,!0);me.addValidator(ft,ks,ct.MAX_LENGTH,ut.THIRD,!0);me.addValidator(ft,Ds,ct.REPEAT,ut.SECOND,!0);const Vs=t=>{ae.addEventListener("submit",async e=>{if(e.preventDefault(),me.validate()){const a=new FormData(ae);As();try{await cs(a),t(),ds()}catch(o){vs(o.message)}finally{Ls()}}})},Os=()=>{ns(),ae.reset(),me.reset()},qs=["jpg","jpeg","png","webp"],Ms=document.querySelector(".pictures"),pe=Ms.querySelector(".img-upload__form"),ar=pe.querySelector(".img-upload__overlay"),lr=pe.querySelector(".img-upload__input"),Rs=pe.querySelector(".img-upload__cancel"),Ns=pe.querySelector(".text__description"),Hs=pe.querySelector(".text__hashtags"),Nt=pe.querySelector(".img-upload__preview img"),Is=document.querySelectorAll(".effects__preview"),Us=()=>document.activeElement===Ns||document.activeElement===Hs,cr=t=>{Ve(t)&&!Us()&&(t.preventDefault(),mt())},Fs=()=>{ar.classList.remove("hidden"),document.body.classList.add("modal-open");const t=lr.files[0],e=t.name.toLowerCase();qs.some(a=>e.endsWith(a))&&(Nt.src=URL.createObjectURL(t),Is.forEach(a=>{a.style.backgroundImage=`url("${Nt.src}")`})),document.addEventListener("keydown",cr)};function mt(){Os(),ar.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",cr)}lr.addEventListener("change",Fs);Rs.addEventListener("click",mt);const Ze=500;Jr();const $s=async()=>{try{const t=await ls();dn(),_e(t),Vr("data",t);const e=cn(t),i=un(t);hn(We(()=>_e(fn(t)),Ze)),pn(We(()=>_e(e),Ze)),mn(We(()=>_e(i),Ze))}catch{kr()}};$s();Vs(mt);
