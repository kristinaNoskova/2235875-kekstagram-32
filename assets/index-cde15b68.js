var kr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Fs=kr((ar,We)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const h of a)if(h.type==="childList")for(const v of h.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&l(v)}).observe(document,{childList:!0,subtree:!0});function i(a){const h={};return a.integrity&&(h.integrity=a.integrity),a.referrerPolicy&&(h.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?h.credentials="include":a.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(a){if(a.ep)return;a.ep=!0;const h=i(a);fetch(a.href,h)}})();(function(t,e){typeof ar=="object"&&typeof We<"u"?We.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).Pristine=e()})(globalThis,function(){var t={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match"}};function e(m){var w=arguments;return this.replace(/\${([^{}]*)}/g,function(y,p){return w[p]})}function i(m){return m.pristine.self.form.querySelectorAll('input[name="'+m.getAttribute("name")+'"]:checked').length}var l={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},a=["required","min","max","minlength","maxlength","pattern"],h=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,v=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,C="en",k={},E=function(m,w){w.name=m,w.priority===void 0&&(w.priority=1),k[m]=w};function O(m,w,y){var p=this;function A(f,x,_,b){var g=k[_];if(g&&(f.push(g),b)){var L=_==="pattern"?[b]:b.split(",");L.unshift(null),x[_]=L}}function U(f){for(var x=[],_=!0,b=0;f.validators[b];b++){var g=f.validators[b],L=f.params[g.name]?f.params[g.name]:[];if(L[0]=f.input.value,!g.fn.apply(f.input,L)&&(_=!1,typeof g.msg=="function"?x.push(g.msg(f.input.value,L)):typeof g.msg=="string"?x.push(e.apply(g.msg,L)):g.msg===Object(g.msg)&&g.msg[C]?x.push(e.apply(g.msg[C],L)):f.messages[C]&&f.messages[C][g.name]?x.push(e.apply(f.messages[C][g.name],L)):t[C]&&t[C][g.name]&&x.push(e.apply(t[C][g.name],L)),g.halt===!0))break}return f.errors=x,_}function se(f){if(f.errorElements)return f.errorElements;var x=function(g,L){for(;(g=g.parentElement)&&!g.classList.contains(L););return g}(f.input,p.config.classTo),_=null,b=null;return(_=p.config.classTo===p.config.errorTextParent?x:x.querySelector("."+p.config.errorTextParent))&&((b=_.querySelector(".pristine-error"))||((b=document.createElement(p.config.errorTextTag)).className="pristine-error "+p.config.errorTextClass,_.appendChild(b),b.pristineDisplay=b.style.display)),f.errorElements=[x,b]}function j(f){var x=se(f),_=x[0],b=x[1];_&&(_.classList.remove(p.config.successClass),_.classList.add(p.config.errorClass)),b&&(b.innerHTML=f.errors.join("<br/>"),b.style.display=b.pristineDisplay||"")}function Q(f){var x=function(_){var b=se(_),g=b[0],L=b[1];return g&&(g.classList.remove(p.config.errorClass),g.classList.remove(p.config.successClass)),L&&(L.innerHTML="",L.style.display="none"),b}(f)[0];x&&x.classList.add(p.config.successClass)}return function(f,x,_){f.setAttribute("novalidate","true"),p.form=f,p.config=function(b,g){for(var L in g)L in b||(b[L]=g[L]);return b}(x||{},l),p.live=_!==!1,p.fields=Array.from(f.querySelectorAll("input:not([type^=hidden]):not([type^=submit]), select, textarea")).map((function(b){var g=[],L={},B={};return[].forEach.call(b.attributes,function(I){if(/^data-pristine-/.test(I.name)){var X=I.name.substr(14),ie=X.match(v);if(ie!==null){var ae=ie[1]===void 0?"en":ie[1];return B.hasOwnProperty(ae)||(B[ae]={}),void(B[ae][X.slice(0,X.length-ie[0].length)]=I.value)}X==="type"&&(X=I.value),A(g,L,X,I.value)}else~a.indexOf(I.name)?A(g,L,I.name,I.value):I.name==="type"&&A(g,L,I.value)}),g.sort(function(I,X){return X.priority-I.priority}),p.live&&b.addEventListener(~["radio","checkbox"].indexOf(b.getAttribute("type"))?"change":"input",(function(I){p.validate(I.target)}).bind(p)),b.pristine={input:b,validators:g,params:L,messages:B,self:p}}).bind(p))}(m,w,y),p.validate=function(f,x){x=f&&x===!0||f===!0;var _=p.fields;f!==!0&&f!==!1&&(f instanceof HTMLElement?_=[f.pristine]:(f instanceof NodeList||f instanceof(window.$||Array)||f instanceof Array)&&(_=Array.from(f).map(function(B){return B.pristine})));for(var b=!0,g=0;_[g];g++){var L=_[g];U(L)?!x&&Q(L):(b=!1,!x&&j(L))}return b},p.getErrors=function(f){if(!f){for(var x=[],_=0;_<p.fields.length;_++){var b=p.fields[_];b.errors.length&&x.push({input:b.input,errors:b.errors})}return x}return f.tagName&&f.tagName.toLowerCase()==="select"?f.pristine.errors:f.length?f[0].pristine.errors:f.pristine.errors},p.addValidator=function(f,x,_,b,g){f instanceof HTMLElement?(f.pristine.validators.push({fn:x,msg:_,priority:b,halt:g}),f.pristine.validators.sort(function(L,B){return B.priority-L.priority})):console.warn("The parameter elem must be a dom element")},p.addError=function(f,x){(f=f.length?f[0]:f).pristine.errors.push(x),j(f.pristine)},p.reset=function(){for(var f=0;p.fields[f];f++)p.fields[f].errorElements=null;Array.from(p.form.querySelectorAll(".pristine-error")).map(function(x){x.parentNode.removeChild(x)}),Array.from(p.form.querySelectorAll("."+p.config.classTo)).map(function(x){x.classList.remove(p.config.successClass),x.classList.remove(p.config.errorClass)})},p.destroy=function(){p.reset(),p.fields.forEach(function(f){delete f.input.pristine}),p.fields=[]},p.setGlobalConfig=function(f){l=f},p}return E("text",{fn:function(m){return!0},priority:0}),E("required",{fn:function(m){return this.type==="radio"||this.type==="checkbox"?i(this):m!==void 0&&m!==""},priority:99,halt:!0}),E("email",{fn:function(m){return!m||h.test(m)}}),E("number",{fn:function(m){return!m||!isNaN(parseFloat(m))},priority:2}),E("integer",{fn:function(m){return!m||/^\d+$/.test(m)}}),E("minlength",{fn:function(m,w){return!m||m.length>=parseInt(w)}}),E("maxlength",{fn:function(m,w){return!m||m.length<=parseInt(w)}}),E("min",{fn:function(m,w){return!m||(this.type==="checkbox"?i(this)>=parseInt(w):parseFloat(m)>=parseFloat(w))}}),E("max",{fn:function(m,w){return!m||(this.type==="checkbox"?i(this)<=parseInt(w):parseFloat(m)<=parseFloat(w))}}),E("pattern",{fn:function(m,w){var y=w.match(new RegExp("^/(.*?)/([gimy]*)$"));return!m||new RegExp(y[1],y[2]).test(m)}}),E("equals",{fn:function(m,w){var y=document.querySelector(w);return y&&(!m&&!y.value||y.value===m)}}),O.addValidator=function(m,w,y,p,A){E(m,{fn:w,msg:y,priority:p,halt:A})},O.addMessages=function(m,w){var y=t.hasOwnProperty(m)?t[m]:t[m]={};Object.keys(w).forEach(function(p,A){y[p]=w[p]})},O.setLocale=function(m){C=m},O});const Dr=5e3,Tr=document.querySelector("#data-error").content,Ct=Tr.querySelector(".data-error"),Vr=()=>{document.body.append(Ct),setTimeout(()=>{Ct.remove()},Dr)},Le=t=>t.key==="Escape",je=(t,e)=>{let i;return(...l)=>{clearTimeout(i),i=setTimeout(()=>t.apply(globalThis,l),e)}},Mt={data:null},qr=t=>Mt[t],Or=(t,e)=>{Mt[t]=e},Mr=5,ne=document.querySelector(".big-picture"),wt=ne.querySelector(".big-picture__img img"),Hr=ne.querySelector(".likes-count"),Nr=ne.querySelector(".social__caption"),Ht=ne.querySelector(".social__comments"),Rr=ne.querySelector(".social__comment-count"),Ur=ne.querySelector(".social__comment-total-count"),Ir=Rr.querySelector(".social__comment-shown-count"),_t=ne.querySelector(".comments-loader");let Ge=[],oe=0;const Nt=document.createDocumentFragment(),Fr=t=>{const e=t.dataset.id;return qr("data").find(a=>a.id===Number(e))},$r=t=>{t.forEach(({avatar:e,name:i,message:l})=>{const a=document.createElement("img");a.classList.add("social__picture"),a.src=e,a.alt=i,a.width=35,a.height=35;const h=document.createElement("p");h.classList.add("social__text"),h.textContent=l;const v=document.createElement("li");v.classList.add("social__comment"),v.append(a),v.append(h),Nt.append(v)})},Ze=()=>{const t=Ge.slice(oe,oe+Mr);t.length>0&&($r(t),Ht.append(Nt),_t.classList.remove("hidden"),oe+=t.length,Ir.textContent=oe),oe>=Ge.length&&_t.classList.add("hidden")},zr=()=>{Ze()},jr=t=>{oe=0,Ht.innerHTML="";const e=Fr(t);wt.src=e.url,wt.alt=e.description,Hr.textContent=e.likes,Ur.textContent=e.comments.length,Nr.textContent=e.description,Ge=e.comments,zr()},Je=document.querySelector(".big-picture"),Br=document.querySelector(".pictures"),Gr=document.querySelector(".big-picture__cancel"),Rt=Je.querySelector(".comments-loader"),Ut=t=>{Le(t)&&(t.preventDefault(),It())},Kr=t=>{const e=t.target.closest(".picture");e&&(Je.classList.remove("hidden"),document.body.classList.add("modal-open"),jr(e),document.addEventListener("keydown",Ut),Rt.addEventListener("click",Ze))};function It(){Je.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",Ut),Rt.removeEventListener("click",Ze)}Br.addEventListener("click",Kr);Gr.addEventListener("click",It);const Lt=25,Xr=25,Yr=100,Wr=100,Ae=document.querySelector(".img-upload__form"),Zr=Ae.querySelector(".scale__control--smaller"),Jr=Ae.querySelector(".scale__control--bigger"),Ft=Ae.querySelector(".scale__control--value"),Qr=Ae.querySelector(".img-upload__preview img"),At=t=>{const e=t/Wr;Qr.style.transform=`scale(${e})`,Ft.setAttribute("value",`${t}%`)},en=()=>{let t=Ft.value.slice(0,-1);Zr.addEventListener("click",()=>{t>Xr&&(t-=Lt,At(t))}),Jr.addEventListener("click",()=>{t<Yr&&(t+=Lt,At(t))})},tn=0,rn=10,Pt=document.querySelector(".pictures"),nn=document.querySelector("#picture").content,sn=nn.querySelector(".picture"),he=document.querySelector(".img-filters"),an=he.querySelectorAll(".img-filters__button"),on=he.querySelector("#filter-default"),ln=he.querySelector("#filter-random"),cn=he.querySelector("#filter-discussed"),Ee=t=>{const e=document.createDocumentFragment();return t.forEach(({url:i,description:l,likes:a,comments:h,id:v})=>{const C=sn.cloneNode(!0),k=C.querySelector(".picture__img");k.src=i,k.alt=l,C.querySelector(".picture__comments").textContent=h.length,C.querySelector(".picture__likes").textContent=a,C.dataset.id=v,e.append(C)}),Array.from(Pt.querySelectorAll(".picture")).forEach(i=>i.remove()),Pt.append(e),t},un=(t,e)=>e.comments.length-t.comments.length,fn=t=>t.slice().sort(un),dn=t=>t.slice().sort((e,i)=>e.id-i.id),mn=t=>t.sort(()=>Math.random()-.5).slice(tn,rn),pn=()=>{he.classList.remove("img-filters--inactive")},Qe=t=>{an.forEach(e=>e.classList.remove("img-filters__button--active")),t.target.classList.add("img-filters__button--active")},hn=t=>{on.addEventListener("click",e=>{Qe(e),t()})},vn=t=>{cn.addEventListener("click",e=>{Qe(e),t()})},gn=t=>{ln.addEventListener("click",e=>{Qe(e),t()})};var Z;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(Z||(Z={}));var z;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(z||(z={}));function Sn(t){return Ce(t)&&typeof t.from=="function"}function Ce(t){return typeof t=="object"&&typeof t.to=="function"}function kt(t){t.parentElement.removeChild(t)}function Ke(t){return t!=null}function Dt(t){t.preventDefault()}function En(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function yn(t,e){return Math.round(t/e)*e}function bn(t,e){var i=t.getBoundingClientRect(),l=t.ownerDocument,a=l.documentElement,h=$t(l);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(h.x=0),e?i.top+h.y-a.clientTop:i.left+h.x-a.clientLeft}function K(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Tt(t,e,i){i>0&&($(t,e),setTimeout(function(){xe(t,e)},i))}function Vt(t){return Math.max(Math.min(t,100),0)}function Pe(t){return Array.isArray(t)?t:[t]}function xn(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function $(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function xe(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function Cn(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function $t(t){var e=window.pageXOffset!==void 0,i=(t.compatMode||"")==="CSS1Compat",l=e?window.pageXOffset:i?t.documentElement.scrollLeft:t.body.scrollLeft,a=e?window.pageYOffset:i?t.documentElement.scrollTop:t.body.scrollTop;return{x:l,y:a}}function wn(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function _n(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function Ln(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function et(t,e){return 100/(e-t)}function Xe(t,e,i){return e*100/(t[i+1]-t[i])}function An(t,e){return Xe(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function Pn(t,e){return e*(t[1]-t[0])/100+t[0]}function pe(t,e){for(var i=1;t>=e[i];)i+=1;return i}function kn(t,e,i){if(i>=t.slice(-1)[0])return 100;var l=pe(i,t),a=t[l-1],h=t[l],v=e[l-1],C=e[l];return v+An([a,h],i)/et(v,C)}function Dn(t,e,i){if(i>=100)return t.slice(-1)[0];var l=pe(i,e),a=t[l-1],h=t[l],v=e[l-1],C=e[l];return Pn([a,h],(i-v)*et(v,C))}function Tn(t,e,i,l){if(l===100)return l;var a=pe(l,t),h=t[a-1],v=t[a];return i?l-h>(v-h)/2?v:h:e[a-1]?t[a-1]+yn(l-t[a-1],e[a-1]):l}var zt=function(){function t(e,i,l){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[l||!1],this.xNumSteps=[!1],this.snap=i;var a,h=[];for(Object.keys(e).forEach(function(v){h.push([Pe(e[v]),v])}),h.sort(function(v,C){return v[0][0]-C[0][0]}),a=0;a<h.length;a++)this.handleEntryPoint(h[a][1],h[a][0]);for(this.xNumSteps=this.xSteps.slice(0),a=0;a<this.xNumSteps.length;a++)this.handleStepPoint(a,this.xNumSteps[a])}return t.prototype.getDistance=function(e){for(var i=[],l=0;l<this.xNumSteps.length-1;l++)i[l]=Xe(this.xVal,e,l);return i},t.prototype.getAbsoluteDistance=function(e,i,l){var a=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[a+1];)a++;else e===this.xPct[this.xPct.length-1]&&(a=this.xPct.length-2);!l&&e===this.xPct[a+1]&&a++,i===null&&(i=[]);var h,v=1,C=i[a],k=0,E=0,O=0,m=0;for(l?h=(e-this.xPct[a])/(this.xPct[a+1]-this.xPct[a]):h=(this.xPct[a+1]-e)/(this.xPct[a+1]-this.xPct[a]);C>0;)k=this.xPct[a+1+m]-this.xPct[a+m],i[a+m]*v+100-h*100>100?(E=k*h,v=(C-100*h)/i[a+m],h=1):(E=i[a+m]*k/100*v,v=0),l?(O=O-E,this.xPct.length+m>=1&&m--):(O=O+E,this.xPct.length-m>=1&&m++),C=i[a+m]*v;return e+O},t.prototype.toStepping=function(e){return e=kn(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return Dn(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=Tn(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,i,l){var a=pe(e,this.xPct);return(e===100||i&&e===this.xPct[a-1])&&(a=Math.max(a-1,1)),(this.xVal[a]-this.xVal[a-1])/l},t.prototype.getNearbySteps=function(e){var i=pe(e,this.xPct);return{stepBefore:{startValue:this.xVal[i-2],step:this.xNumSteps[i-2],highestStep:this.xHighestCompleteStep[i-2]},thisStep:{startValue:this.xVal[i-1],step:this.xNumSteps[i-1],highestStep:this.xHighestCompleteStep[i-1]},stepAfter:{startValue:this.xVal[i],step:this.xNumSteps[i],highestStep:this.xHighestCompleteStep[i]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(xn);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,i){var l;if(e==="min"?l=0:e==="max"?l=100:l=parseFloat(e),!K(l)||!K(i[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(l),this.xVal.push(i[0]);var a=Number(i[1]);l?this.xSteps.push(isNaN(a)?!1:a):isNaN(a)||(this.xSteps[0]=a),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,i){if(i){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=Xe([this.xVal[e],this.xVal[e+1]],i,0)/et(this.xPct[e],this.xPct[e+1]);var l=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],a=Math.ceil(Number(l.toFixed(3))-1),h=this.xVal[e]+this.xNumSteps[e]*a;this.xHighestCompleteStep[e]=h}},t}(),qt={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},jt={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},W={tooltips:".__tooltips",aria:".__aria"};function Vn(t,e){if(!K(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function qn(t,e){if(!K(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function On(t,e){if(!K(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function Mn(t,e){if(!K(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function Hn(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new zt(e,t.snap||!1,t.singleStep)}function Nn(t,e){if(e=Pe(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function Rn(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function Un(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function In(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function Bt(t,e){var i=[!1],l;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(l=1;l<t.handles;l++)i.push(e);i.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=e}t.connect=i}function Fn(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Gt(t,e){if(!K(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function $n(t,e){if(!K(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function zn(t,e){var i;if(!K(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||K(e[0])||K(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],i=0;i<t.spectrum.xNumSteps.length-1;i++)if(t.padding[0][i]<0||t.padding[1][i]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var l=e[0]+e[1],a=t.spectrum.xVal[0],h=t.spectrum.xVal[t.spectrum.xVal.length-1];if(l/(h-a)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function jn(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Bn(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,l=e.indexOf("drag")>=0,a=e.indexOf("fixed")>=0,h=e.indexOf("snap")>=0,v=e.indexOf("hover")>=0,C=e.indexOf("unconstrained")>=0,k=e.indexOf("invert-connects")>=0,E=e.indexOf("drag-all")>=0,O=e.indexOf("smooth-steps")>=0;if(a){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Gt(t,t.start[1]-t.start[0])}if(k&&t.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(C&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:i||h,drag:l,dragAll:E,smoothSteps:O,fixed:a,snap:h,hover:v,unconstrained:C,invertConnects:k}}function Gn(t,e){if(e!==!1)if(e===!0||Ce(e)){t.tooltips=[];for(var i=0;i<t.handles;i++)t.tooltips.push(e)}else{if(e=Pe(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(l){if(typeof l!="boolean"&&!Ce(l))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function Kn(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function Xn(t,e){if(!Ce(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function Yn(t,e){if(!Sn(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Wn(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Zn(t,e){t.documentElement=e}function Jn(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Qn(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(i){t.cssClasses[i]=t.cssPrefix+e[i]})):t.cssClasses=e}function Kt(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:qt,format:qt},i={step:{r:!1,t:Vn},keyboardPageMultiplier:{r:!1,t:qn},keyboardMultiplier:{r:!1,t:On},keyboardDefaultStep:{r:!1,t:Mn},start:{r:!0,t:Nn},connect:{r:!0,t:Bt},direction:{r:!0,t:jn},snap:{r:!1,t:Rn},animate:{r:!1,t:Un},animationDuration:{r:!1,t:In},range:{r:!0,t:Hn},orientation:{r:!1,t:Fn},margin:{r:!1,t:Gt},limit:{r:!1,t:$n},padding:{r:!1,t:zn},behaviour:{r:!0,t:Bn},ariaFormat:{r:!1,t:Xn},format:{r:!1,t:Yn},tooltips:{r:!1,t:Gn},keyboardSupport:{r:!0,t:Wn},documentElement:{r:!1,t:Zn},cssPrefix:{r:!0,t:Jn},cssClasses:{r:!0,t:Qn},handleAttributes:{r:!1,t:Kn}},l={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:jt,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(i).forEach(function(k){if(!Ke(t[k])&&l[k]===void 0){if(i[k].r)throw new Error("noUiSlider: '"+k+"' is required.");return}i[k].t(e,Ke(t[k])?t[k]:l[k])}),e.pips=t.pips;var a=document.createElement("div"),h=a.style.msTransform!==void 0,v=a.style.transform!==void 0;e.transformRule=v?"transform":h?"msTransform":"webkitTransform";var C=[["left","top"],["right","bottom"]];return e.style=C[e.dir][e.ort],e}function es(t,e,i){var l=wn(),a=Ln(),h=a&&_n(),v=t,C,k,E,O,m,w,y=e.spectrum,p=[],A=[],U=[],se=0,j={},Q=!1,f=t.ownerDocument,x=e.documentElement||f.documentElement,_=f.body,b=f.dir==="rtl"||e.ort===1?0:100;function g(r,n){var s=f.createElement("div");return n&&$(s,n),r.appendChild(s),s}function L(r,n){var s=g(r,e.cssClasses.origin),o=g(s,e.cssClasses.handle);if(g(o,e.cssClasses.touchArea),o.setAttribute("data-handle",String(n)),e.keyboardSupport&&(o.setAttribute("tabindex","0"),o.addEventListener("keydown",function(u){return Er(u,n)})),e.handleAttributes!==void 0){var c=e.handleAttributes[n];Object.keys(c).forEach(function(u){o.setAttribute(u,c[u])})}return o.setAttribute("role","slider"),o.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),n===0?$(o,e.cssClasses.handleLower):n===e.handles-1&&$(o,e.cssClasses.handleUpper),s.handle=o,s}function B(r,n){return n?g(r,e.cssClasses.connect):!1}function I(r,n){k=g(n,e.cssClasses.connects),E=[],O=[],O.push(B(k,r[0]));for(var s=0;s<e.handles;s++)E.push(L(n,s)),U[s]=s,O.push(B(k,r[s+1]))}function X(r){$(r,e.cssClasses.target),e.dir===0?$(r,e.cssClasses.ltr):$(r,e.cssClasses.rtl),e.ort===0?$(r,e.cssClasses.horizontal):$(r,e.cssClasses.vertical);var n=getComputedStyle(r).direction;return n==="rtl"?$(r,e.cssClasses.textDirectionRtl):$(r,e.cssClasses.textDirectionLtr),g(r,e.cssClasses.base)}function ie(r,n){return!e.tooltips||!e.tooltips[n]?!1:g(r.firstChild,e.cssClasses.tooltip)}function ae(){return v.hasAttribute("disabled")}function Te(r){var n=E[r];return n.hasAttribute("disabled")}function or(r){r!=null?(E[r].setAttribute("disabled",""),E[r].handle.removeAttribute("tabindex")):(v.setAttribute("disabled",""),E.forEach(function(n){n.handle.removeAttribute("tabindex")}))}function lr(r){r!=null?(E[r].removeAttribute("disabled"),E[r].handle.setAttribute("tabindex","0")):(v.removeAttribute("disabled"),E.forEach(function(n){n.removeAttribute("disabled"),n.handle.setAttribute("tabindex","0")}))}function Ve(){w&&(fe("update"+W.tooltips),w.forEach(function(r){r&&kt(r)}),w=null)}function ct(){Ve(),w=E.map(ie),Ne("update"+W.tooltips,function(r,n,s){if(!(!w||!e.tooltips)&&w[n]!==!1){var o=r[n];e.tooltips[n]!==!0&&(o=e.tooltips[n].to(s[n])),w[n].innerHTML=o}})}function cr(){fe("update"+W.aria),Ne("update"+W.aria,function(r,n,s,o,c){U.forEach(function(u){var S=E[u],d=ve(A,u,0,!0,!0,!0),D=ve(A,u,100,!0,!0,!0),T=c[u],V=String(e.ariaFormat.to(s[u]));d=y.fromStepping(d).toFixed(1),D=y.fromStepping(D).toFixed(1),T=y.fromStepping(T).toFixed(1),S.children[0].setAttribute("aria-valuemin",d),S.children[0].setAttribute("aria-valuemax",D),S.children[0].setAttribute("aria-valuenow",T),S.children[0].setAttribute("aria-valuetext",V)})})}function ur(r){if(r.mode===Z.Range||r.mode===Z.Steps)return y.xVal;if(r.mode===Z.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=r.values-1,s=100/n,o=[];n--;)o[n]=n*s;return o.push(100),ut(o,r.stepped)}return r.mode===Z.Positions?ut(r.values,r.stepped):r.mode===Z.Values?r.stepped?r.values.map(function(c){return y.fromStepping(y.getStep(y.toStepping(c)))}):r.values:[]}function ut(r,n){return r.map(function(s){return y.fromStepping(n?y.getStep(s):s)})}function fr(r){function n(T,V){return Number((T+V).toFixed(7))}var s=ur(r),o={},c=y.xVal[0],u=y.xVal[y.xVal.length-1],S=!1,d=!1,D=0;return s=En(s.slice().sort(function(T,V){return T-V})),s[0]!==c&&(s.unshift(c),S=!0),s[s.length-1]!==u&&(s.push(u),d=!0),s.forEach(function(T,V){var q,P,H,F=T,N=s[V+1],R,Ie,Fe,$e,yt,ze,bt,xt=r.mode===Z.Steps;for(xt&&(q=y.xNumSteps[V]),q||(q=N-F),N===void 0&&(N=F),q=Math.max(q,1e-7),P=F;P<=N;P=n(P,q)){for(R=y.toStepping(P),Ie=R-D,yt=Ie/(r.density||1),ze=Math.round(yt),bt=Ie/ze,H=1;H<=ze;H+=1)Fe=D+H*bt,o[Fe.toFixed(5)]=[y.fromStepping(Fe),0];$e=s.indexOf(P)>-1?z.LargeValue:xt?z.SmallValue:z.NoValue,!V&&S&&P!==N&&($e=0),P===N&&d||(o[R.toFixed(5)]=[P,$e]),D=R}}),o}function dr(r,n,s){var o,c,u=f.createElement("div"),S=(o={},o[z.None]="",o[z.NoValue]=e.cssClasses.valueNormal,o[z.LargeValue]=e.cssClasses.valueLarge,o[z.SmallValue]=e.cssClasses.valueSub,o),d=(c={},c[z.None]="",c[z.NoValue]=e.cssClasses.markerNormal,c[z.LargeValue]=e.cssClasses.markerLarge,c[z.SmallValue]=e.cssClasses.markerSub,c),D=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],T=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];$(u,e.cssClasses.pips),$(u,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function V(P,H){var F=H===e.cssClasses.value,N=F?D:T,R=F?S:d;return H+" "+N[e.ort]+" "+R[P]}function q(P,H,F){if(F=n?n(H,F):F,F!==z.None){var N=g(u,!1);N.className=V(F,e.cssClasses.marker),N.style[e.style]=P+"%",F>z.NoValue&&(N=g(u,!1),N.className=V(F,e.cssClasses.value),N.setAttribute("data-value",String(H)),N.style[e.style]=P+"%",N.innerHTML=String(s.to(H)))}}return Object.keys(r).forEach(function(P){q(P,r[P][0],r[P][1])}),u}function qe(){m&&(kt(m),m=null)}function Oe(r){qe();var n=fr(r),s=r.filter,o=r.format||{to:function(c){return String(Math.round(c))}};return m=v.appendChild(dr(n,s,o)),m}function ft(){var r=C.getBoundingClientRect(),n="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||C[n]:r.height||C[n]}function ee(r,n,s,o){var c=function(S){var d=mr(S,o.pageOffset,o.target||n);if(!d||ae()&&!o.doNotReject||Cn(v,e.cssClasses.tap)&&!o.doNotReject||r===l.start&&d.buttons!==void 0&&d.buttons>1||o.hover&&d.buttons)return!1;h||d.preventDefault(),d.calcPoint=d.points[e.ort],s(d,o)},u=[];return r.split(" ").forEach(function(S){n.addEventListener(S,c,h?{passive:!0}:!1),u.push([S,c])}),u}function mr(r,n,s){var o=r.type.indexOf("touch")===0,c=r.type.indexOf("mouse")===0,u=r.type.indexOf("pointer")===0,S=0,d=0;if(r.type.indexOf("MSPointer")===0&&(u=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(o){var D=function(q){var P=q.target;return P===s||s.contains(P)||r.composed&&r.composedPath().shift()===s};if(r.type==="touchstart"){var T=Array.prototype.filter.call(r.touches,D);if(T.length>1)return!1;S=T[0].pageX,d=T[0].pageY}else{var V=Array.prototype.find.call(r.changedTouches,D);if(!V)return!1;S=V.pageX,d=V.pageY}}return n=n||$t(f),(c||u)&&(S=r.clientX+n.x,d=r.clientY+n.y),r.pageOffset=n,r.points=[S,d],r.cursor=c||u,r}function dt(r){var n=r-bn(C,e.ort),s=n*100/ft();return s=Vt(s),e.dir?100-s:s}function pr(r){var n=100,s=!1;return E.forEach(function(o,c){if(!Te(c)){var u=A[c],S=Math.abs(u-r),d=S===100&&n===100,D=S<n,T=S<=n&&r>u;(D||T||d)&&(s=c,n=S)}}),s}function hr(r,n){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Me(r,n)}function vr(r,n){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&n.buttonsProperty!==0)return Me(r,n);var s=(e.dir?-1:1)*(r.calcPoint-n.startCalcPoint),o=s*100/n.baseSize;pt(s>0,o,n.locations,n.handleNumbers,n.connect)}function Me(r,n){n.handle&&(xe(n.handle,e.cssClasses.active),se-=1),n.listeners.forEach(function(s){x.removeEventListener(s[0],s[1])}),se===0&&(xe(v,e.cssClasses.drag),Ue(),r.cursor&&(_.style.cursor="",_.removeEventListener("selectstart",Dt))),e.events.smoothSteps&&(n.handleNumbers.forEach(function(s){te(s,A[s],!0,!0,!1,!1)}),n.handleNumbers.forEach(function(s){M("update",s)})),n.handleNumbers.forEach(function(s){M("change",s),M("set",s),M("end",s)})}function He(r,n){if(!n.handleNumbers.some(Te)){var s;if(n.handleNumbers.length===1){var o=E[n.handleNumbers[0]];s=o.children[0],se+=1,$(s,e.cssClasses.active)}r.stopPropagation();var c=[],u=ee(l.move,x,vr,{target:r.target,handle:s,connect:n.connect,listeners:c,startCalcPoint:r.calcPoint,baseSize:ft(),pageOffset:r.pageOffset,handleNumbers:n.handleNumbers,buttonsProperty:r.buttons,locations:A.slice()}),S=ee(l.end,x,Me,{target:r.target,handle:s,listeners:c,doNotReject:!0,handleNumbers:n.handleNumbers}),d=ee("mouseout",x,hr,{target:r.target,handle:s,listeners:c,doNotReject:!0,handleNumbers:n.handleNumbers});c.push.apply(c,u.concat(S,d)),r.cursor&&(_.style.cursor=getComputedStyle(r.target).cursor,E.length>1&&$(v,e.cssClasses.drag),_.addEventListener("selectstart",Dt,!1)),n.handleNumbers.forEach(function(D){M("start",D)})}}function gr(r){r.stopPropagation();var n=dt(r.calcPoint),s=pr(n);s!==!1&&(e.events.snap||Tt(v,e.cssClasses.tap,e.animationDuration),te(s,n,!0,!0),Ue(),M("slide",s,!0),M("update",s,!0),e.events.snap?He(r,{handleNumbers:[s]}):(M("change",s,!0),M("set",s,!0)))}function Sr(r){var n=dt(r.calcPoint),s=y.getStep(n),o=y.fromStepping(s);Object.keys(j).forEach(function(c){c.split(".")[0]==="hover"&&j[c].forEach(function(u){u.call(Se,o)})})}function Er(r,n){if(ae()||Te(n))return!1;var s=["Left","Right"],o=["Down","Up"],c=["PageDown","PageUp"],u=["Home","End"];e.dir&&!e.ort?s.reverse():e.ort&&!e.dir&&(o.reverse(),c.reverse());var S=r.key.replace("Arrow",""),d=S===c[0],D=S===c[1],T=S===o[0]||S===s[0]||d,V=S===o[1]||S===s[1]||D,q=S===u[0],P=S===u[1];if(!T&&!V&&!q&&!P)return!0;r.preventDefault();var H;if(V||T){var F=T?0:1,N=St(n),R=N[F];if(R===null)return!1;R===!1&&(R=y.getDefaultStep(A[n],T,e.keyboardDefaultStep)),D||d?R*=e.keyboardPageMultiplier:R*=e.keyboardMultiplier,R=Math.max(R,1e-7),R=(T?-1:1)*R,H=p[n]+R}else P?H=e.spectrum.xVal[e.spectrum.xVal.length-1]:H=e.spectrum.xVal[0];return te(n,y.toStepping(H),!0,!0),M("slide",n),M("update",n),M("change",n),M("set",n),!1}function mt(r){r.fixed||E.forEach(function(n,s){ee(l.start,n.children[0],He,{handleNumbers:[s]})}),r.tap&&ee(l.start,C,gr,{}),r.hover&&ee(l.move,C,Sr,{hover:!0}),r.drag&&O.forEach(function(n,s){if(!(n===!1||s===0||s===O.length-1)){var o=E[s-1],c=E[s],u=[n],S=[o,c],d=[s-1,s];$(n,e.cssClasses.draggable),r.fixed&&(u.push(o.children[0]),u.push(c.children[0])),r.dragAll&&(S=E,d=U),u.forEach(function(D){ee(l.start,D,He,{handles:S,handleNumbers:d,connect:n})})}})}function Ne(r,n){j[r]=j[r]||[],j[r].push(n),r.split(".")[0]==="update"&&E.forEach(function(s,o){M("update",o)})}function yr(r){return r===W.aria||r===W.tooltips}function fe(r){var n=r&&r.split(".")[0],s=n?r.substring(n.length):r;Object.keys(j).forEach(function(o){var c=o.split(".")[0],u=o.substring(c.length);(!n||n===c)&&(!s||s===u)&&(!yr(u)||s===u)&&delete j[o]})}function M(r,n,s){Object.keys(j).forEach(function(o){var c=o.split(".")[0];r===c&&j[o].forEach(function(u){u.call(Se,p.map(e.format.to),n,p.slice(),s||!1,A.slice(),Se)})})}function ve(r,n,s,o,c,u,S){var d;return E.length>1&&!e.events.unconstrained&&(o&&n>0&&(d=y.getAbsoluteDistance(r[n-1],e.margin,!1),s=Math.max(s,d)),c&&n<E.length-1&&(d=y.getAbsoluteDistance(r[n+1],e.margin,!0),s=Math.min(s,d))),E.length>1&&e.limit&&(o&&n>0&&(d=y.getAbsoluteDistance(r[n-1],e.limit,!1),s=Math.min(s,d)),c&&n<E.length-1&&(d=y.getAbsoluteDistance(r[n+1],e.limit,!0),s=Math.max(s,d))),e.padding&&(n===0&&(d=y.getAbsoluteDistance(0,e.padding[0],!1),s=Math.max(s,d)),n===E.length-1&&(d=y.getAbsoluteDistance(100,e.padding[1],!0),s=Math.min(s,d))),S||(s=y.getStep(s)),s=Vt(s),s===r[n]&&!u?!1:s}function Re(r,n){var s=e.ort;return(s?n:r)+", "+(s?r:n)}function pt(r,n,s,o,c){var u=s.slice(),S=o[0],d=e.events.smoothSteps,D=[!r,r],T=[r,!r];o=o.slice(),r&&o.reverse(),o.length>1?o.forEach(function(q,P){var H=ve(u,q,u[q]+n,D[P],T[P],!1,d);H===!1?n=0:(n=H-u[q],u[q]=H)}):D=T=[!0];var V=!1;o.forEach(function(q,P){V=te(q,s[q]+n,D[P],T[P],!1,d)||V}),V&&(o.forEach(function(q){M("update",q),M("slide",q)}),c!=null&&M("drag",S))}function ht(r,n){return e.dir?100-r-n:r}function br(r,n){A[r]=n,p[r]=y.fromStepping(n);var s=ht(n,0)-b,o="translate("+Re(s+"%","0")+")";if(E[r].style[e.transformRule]=o,e.events.invertConnects&&A.length>1){var c=A.every(function(u,S,d){return S===0||u>=d[S-1]});if(Q!==!c){Ar();return}}de(r),de(r+1),Q&&(de(r-1),de(r+2))}function Ue(){U.forEach(function(r){var n=A[r]>50?-1:1,s=3+(E.length+n*r);E[r].style.zIndex=String(s)})}function te(r,n,s,o,c,u){return c||(n=ve(A,r,n,s,o,!1,u)),n===!1?!1:(br(r,n),!0)}function de(r){if(O[r]){var n=A.slice();Q&&n.sort(function(d,D){return d-D});var s=0,o=100;r!==0&&(s=n[r-1]),r!==O.length-1&&(o=n[r]);var c=o-s,u="translate("+Re(ht(s,c)+"%","0")+")",S="scale("+Re(c/100,"1")+")";O[r].style[e.transformRule]=u+" "+S}}function vt(r,n){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=y.toStepping(r)),r===!1||isNaN(r))?A[n]:r}function ge(r,n,s){var o=Pe(r),c=A[0]===void 0;n=n===void 0?!0:n,e.animate&&!c&&Tt(v,e.cssClasses.tap,e.animationDuration),U.forEach(function(d){te(d,vt(o[d],d),!0,!1,s)});var u=U.length===1?0:1;if(c&&y.hasNoSize()&&(s=!0,A[0]=0,U.length>1)){var S=100/(U.length-1);U.forEach(function(d){A[d]=d*S})}for(;u<U.length;++u)U.forEach(function(d){te(d,A[d],!0,!0,s)});Ue(),U.forEach(function(d){M("update",d),o[d]!==null&&n&&M("set",d)})}function xr(r){ge(e.start,r)}function Cr(r,n,s,o){if(r=Number(r),!(r>=0&&r<U.length))throw new Error("noUiSlider: invalid handle number, got: "+r);te(r,vt(n,r),!0,!0,o),M("update",r),s&&M("set",r)}function gt(r){if(r===void 0&&(r=!1),r)return p.length===1?p[0]:p.slice(0);var n=p.map(e.format.to);return n.length===1?n[0]:n}function wr(){for(fe(W.aria),fe(W.tooltips),Object.keys(e.cssClasses).forEach(function(r){xe(v,e.cssClasses[r])});v.firstChild;)v.removeChild(v.firstChild);delete v.noUiSlider}function St(r){var n=A[r],s=y.getNearbySteps(n),o=p[r],c=s.thisStep.step,u=null;if(e.snap)return[o-s.stepBefore.startValue||null,s.stepAfter.startValue-o||null];c!==!1&&o+c>s.stepAfter.startValue&&(c=s.stepAfter.startValue-o),o>s.thisStep.startValue?u=s.thisStep.step:s.stepBefore.step===!1?u=!1:u=o-s.stepBefore.highestStep,n===100?c=null:n===0&&(u=null);var S=y.countStepDecimals();return c!==null&&c!==!1&&(c=Number(c.toFixed(S))),u!==null&&u!==!1&&(u=Number(u.toFixed(S))),[u,c]}function _r(){return U.map(St)}function Lr(r,n){var s=gt(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];o.forEach(function(u){r[u]!==void 0&&(i[u]=r[u])});var c=Kt(i);o.forEach(function(u){r[u]!==void 0&&(e[u]=c[u])}),y=c.spectrum,e.margin=c.margin,e.limit=c.limit,e.padding=c.padding,e.pips?Oe(e.pips):qe(),e.tooltips?ct():Ve(),A=[],ge(Ke(r.start)?r.start:s,n),r.connect&&Et()}function Et(){for(;k.firstChild;)k.removeChild(k.firstChild);for(var r=0;r<=e.handles;r++)O[r]=B(k,e.connect[r]),de(r);mt({drag:e.events.drag,fixed:!0})}function Ar(){Q=!Q,Bt(e,e.connect.map(function(r){return!r})),Et()}function Pr(){C=X(v),I(e.connect,C),mt(e.events),ge(e.start),e.pips&&Oe(e.pips),e.tooltips&&ct(),cr()}Pr();var Se={destroy:wr,steps:_r,on:Ne,off:fe,get:gt,set:ge,setHandle:Cr,reset:xr,disable:or,enable:lr,__moveHandles:function(r,n,s){pt(r,n,A,s)},options:i,updateOptions:Lr,target:v,removePips:qe,removeTooltips:Ve,getPositions:function(){return A.slice()},getTooltips:function(){return w},getOrigins:function(){return E},pips:Oe};return Se}function ts(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var i=Kt(e),l=es(t,i,e);return t.noUiSlider=l,l}const rs={__spectrum:zt,cssClasses:jt,create:ts},me={NONE:"none",CHROME:"chrome",SEPIA:"sepia",MARVIN:"marvin",PHOBOS:"phobos",HEAT:"heat"},Y={NONE:"none",GRAYSCALE:"grayscale",SEPIA:"sepia",INVERT:"invert",BLUR:"blur",BRIGHTNESS:"brightness"},J={phobos:{range:{min:0,max:3},start:3,step:.1},heat:{range:{min:1,max:3},start:3,step:.1},marvin:{range:{min:0,max:100},start:100,step:1},chrome:{range:{min:0,max:1},step:.1,start:1},sepia:{range:{min:0,max:1},step:.1,start:1},none:{range:{min:0,max:1},step:.1,start:1}},ke=document.querySelector(".img-upload__form"),Ye=ke.querySelector(".img-upload__preview img"),ns=ke.querySelector(".effects__list"),le=ke.querySelector(".img-upload__effect-level"),ye=le.querySelector(".effect-level__value"),we=le.querySelector(".effect-level__slider"),ss=ke.querySelector(".scale__control--value");let G;le.classList.add("hidden");const is=()=>{Ye.style.filter="none",le.classList.add("hidden"),Ye.style.transform="scale(100%)",ss.setAttribute("value","100%")};rs.create(we,{range:{min:J.none.range.min,max:J.none.range.max},step:J.none.step,start:J.none.start,connect:"lower",format:{to:t=>Number.isInteger(t)?t.toFixed(0):t.toFixed(1),from:t=>parseFloat(t)}});const be=t=>{Ye.style.filter=t},as=t=>{switch(!0){case t.value===me.CHROME:G=Y.GRAYSCALE;break;case t.value===me.SEPIA:G=Y.SEPIA;break;case t.value===me.MARVIN:G=Y.INVERT;break;case t.value===me.PHOBOS:G=Y.BLUR;break;case t.value===me.HEAT:G=Y.BRIGHTNESS;break;default:G=Y.NONE,le.classList.add("hidden")}};we.noUiSlider.on("update",()=>{ye.setAttribute("value",we.noUiSlider.get()),G===Y.INVERT?be(`${G}(${ye.getAttribute("value")}%)`):G===Y.BLUR?be(`${G}(${ye.getAttribute("value")}px)`):G===Y.NONE?be(Y.NONE):be(`${G}(${ye.getAttribute("value")})`)});const os=t=>{const e=t.value;we.noUiSlider.updateOptions({range:{min:J[e].range.min,max:J[e].range.max},start:J[e].start,step:J[e].step})},ls=t=>{const e=t.target.closest(".effects__radio");e&&(le.classList.remove("hidden"),as(e),os(e))};ns.addEventListener("click",ls);const cs="https://32.javascript.htmlacademy.pro/kekstagram",Xt={GET_DATA:"/data",SEND_DATA:"/"},Yt={GET:"GET",POST:"POST"},Wt=async(t,e=Yt.GET,i=null)=>{let l;try{if(l=await fetch(`${cs}${t}`,{method:e,body:i}),!l.ok)throw new Error(`${l.status}: ${l.statusText}`)}catch(a){throw new Error(a.message)}return await l.json()},us=()=>Wt(Xt.GET_DATA),fs=t=>Wt(Xt.SEND_DATA,Yt.POST,t),Zt=document.querySelector("#success").content,tt=Zt.querySelector(".success"),ds=Zt.querySelector(".success__inner"),ms=tt.querySelector(".success__button"),Jt=t=>{Le(t)&&(t.preventDefault(),rt())},Qt=t=>{ds.contains(t.target)||rt()},ps=()=>{document.body.append(tt),document.addEventListener("keydown",Jt),document.addEventListener("click",Qt)};function rt(){tt.remove(),document.removeEventListener("keydown",Jt),document.removeEventListener("click",Qt)}ms.addEventListener("click",rt);const hs=document.querySelector("#error").content,De=hs.querySelector(".error"),vs=De.querySelector(".error__inner"),gs=De.querySelector(".error__button"),er=t=>{Le(t)&&(t.preventDefault(),t.stopPropagation(),nt())},tr=t=>{vs.contains(t.target)||nt()},Ss=()=>{document.body.append(De),document.body.addEventListener("keydown",er),document.addEventListener("click",tr)};function nt(){De.remove(),document.body.removeEventListener("keydown",er),document.removeEventListener("click",tr)}gs.addEventListener("click",nt);const Es=/^#[a-zя-яёйц0-9]{1,19}$/i,ys=5,bs=140,st={MAX_LENGTH:"Максимум 5 хештегов",INVALID:"Хештег должен начинаться с # и включать буквы и цифры",REPEAT:"Такой хештег уже существует"},rr={IDLE:"Опубликовать",SENDING:"Опубликовываю..."},it={FIRST:1,SECOND:2,THIRD:3},xs=document.querySelector(".pictures"),re=xs.querySelector(".img-upload__form"),Cs=re.querySelector(".text__description"),at=re.querySelector(".text__hashtags"),_e=re.querySelector(".img-upload__submit"),ws=()=>{_e.disabled=!0,_e.textContent=rr.SENDING},_s=()=>{_e.disabled=!1,_e.textContent=rr.IDLE},ce=new Pristine(re,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper",errorTextTag:"div",errorTextClass:"img-upload__field-wrapper--error"}),Ls=t=>t.length<=bs,ot=t=>t.trim().split(" ").filter(e=>!!e.length),As=t=>{const e=ot(t);return t.length===0?!0:e.every(i=>Es.test(i))},Ps=t=>ot(t).length<=ys,ks=t=>{const l=ot(t).slice().sort().map(a=>a.toLowerCase());return t.length===0?!0:l[0]!==l[1]};ce.addValidator(Cs,Ls,"Максимум 140 символов");ce.addValidator(at,As,st.INVALID,it.FIRST,!0);ce.addValidator(at,Ps,st.MAX_LENGTH,it.THIRD,!0);ce.addValidator(at,ks,st.REPEAT,it.SECOND,!0);const Ds=t=>{re.addEventListener("submit",async e=>{if(e.preventDefault(),ce.validate()){const l=new FormData(re);ws();try{await fs(l),t(),ps()}catch(a){Ss(a.message)}finally{_s()}}})},Ts=()=>{is(),re.reset(),ce.reset()},Vs=["jpg","jpeg","png","webp"],qs=document.querySelector(".pictures"),ue=qs.querySelector(".img-upload__form"),nr=ue.querySelector(".img-upload__overlay"),sr=ue.querySelector(".img-upload__input"),Os=ue.querySelector(".img-upload__cancel"),Ms=ue.querySelector(".text__description"),Hs=ue.querySelector(".text__hashtags"),Ot=ue.querySelector(".img-upload__preview img"),Ns=document.querySelectorAll(".effects__preview"),Rs=()=>document.activeElement===Ms||document.activeElement===Hs,ir=t=>{Le(t)&&!Rs()&&(t.preventDefault(),lt())},Us=()=>{nr.classList.remove("hidden"),document.body.classList.add("modal-open");const t=sr.files[0],e=t.name.toLowerCase();Vs.some(l=>e.endsWith(l))&&(Ot.src=URL.createObjectURL(t),Ns.forEach(l=>{l.style.backgroundImage=`url("${Ot.src}")`})),document.addEventListener("keydown",ir)};function lt(){Ts(),nr.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",ir)}sr.addEventListener("change",Us);Os.addEventListener("click",lt);const Be=500;en();const Is=async()=>{try{const t=await us();pn(),Ee(t),Or("data",t);const e=fn(t),i=dn(t);gn(je(()=>Ee(mn(t)),Be)),vn(je(()=>Ee(e),Be)),hn(je(()=>Ee(i),Be))}catch{Vr()}};Is();Ds(lt)});export default Fs();
